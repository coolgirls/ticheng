(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-product"],{"09e3":function(t,e,i){"use strict";i.r(e);var n=i("1e08"),o=i("2dc5");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("661c");var a=i("2877"),c=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"87d2a108",null);e["default"]=c.exports},"1e08":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"forms"},[i("v-uni-view",{staticClass:"person-item"},[i("v-uni-label",[t._v("产品名称")]),i("v-uni-input",{attrs:{type:"text",placeholder:"填写产品名称"},model:{value:t.ProductName,callback:function(e){t.ProductName=e},expression:"ProductName"}})],1),i("v-uni-view",{staticClass:"person-pic"},[i("v-uni-view",{staticClass:"pic-title"},[t._v("购买产品")]),i("v-uni-view",{staticClass:"pic-list"},[t._l(t.ProductImg,function(e,n){return i("v-uni-view",{staticClass:"pic-item"},[i("v-uni-image",{staticClass:"item-pic",attrs:{src:e.src,mode:"aspectFill"}}),i("v-uni-image",{staticClass:"shanchu-btn",attrs:{src:"../../static/del.png",mode:"aspectFill"},on:{click:function(e){e=t.$handleEvent(e),t.shanchu(n)}}})],1)}),t.isShow?i("v-uni-view",{staticClass:"uploadPic",on:{click:function(e){e=t.$handleEvent(e),t.proPic(e)}}},[i("v-uni-image",{staticClass:"oldPic",attrs:{src:"../../static/photo.png",mode:"aspectFill"}}),i("v-uni-text",[t._v("上传照片")])],1):t._e()],2)],1)],1),i("v-uni-view",{staticClass:"submin-btn",attrs:{disabled:t.isDisable},on:{click:function(e){e=t.$handleEvent(e),t.subInfo(e)}}},[t._v("确认")])],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"2dc5":function(t,e,i){"use strict";i.r(e);var n=i("6bd2"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"4cc2":function(t,e,i){var n=i("dfad");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("5fa4a943",n,!0,{sourceMap:!1,shadowMode:!1})},"661c":function(t,e,i){"use strict";var n=i("4cc2"),o=i.n(n);o.a},"6bd2":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("3400")),s=n(i("b735")),a=i("e2e7"),c="",r={data:function(){return{ProductImg:[],ProductName:"",isDisable:!1,isShow:!0,userID:""}},onLoad:function(){this.userID=uni.getStorageSync("userId")},methods:{proPic:function(){var t=this,e=this,i=this.ProductImg;console.log("allLen",i.length),uni.chooseImage({count:9-i.length,sizeType:["compressed"],sourceType:["album"],success:function(n){console.log("res",n);var o=n.tempFilePaths,s=o.length+i.length;if(s>9)uni.showToast({title:"上传图片不能超过9张!",icon:"none"}),t.isShow=!0;else for(var r in o){var l=n.tempFiles[r].size;l>1024&&(c=l/1024*100/100),c>50?uni.getImageInfo({src:n.tempFilePaths[r],success:function(t){console.log("压缩前",t),console.log(t.width),console.log(t.height);var n=t.width,o=t.height,s=new Image;s.src=t.path;var c=document.createElement("canvas"),r=c.getContext("2d");c.width=n/8,c.height=o/8,console.log("后",c.width),console.log("后",c.height),r.drawImage(s,0,0,n/8,o/8),c.toBlob(function(t){var n=window.URL.createObjectURL(t);(0,a.pathToBase64)(n).then(function(t){i.push({src:t}),i.length>=9&&(e.isShow=!1),e.ProductImg=i}).catch(function(t){console.error(t)})})}}):(0,a.pathToBase64)(n.tempFilePaths[r]).then(function(t){i.push({src:t}),i.length>=9&&(e.isShow=!1),e.ProductImg=i,console.log(2)}).catch(function(t){console.error(t)})}}})},shanchu:function(t){var e=t,i=this.ProductImg;i.splice(e,1),i.length<9&&(this.isShow=!0),this.ProductImg=i},subInfo:function(){var t=this,e=this,i=e.ProductName,n=e.ProductImg,a=e.userID;if(""==i)uni.showToast({title:"产品名称不能为空",icon:"none"});else if(""==n)uni.showToast({title:"产品图片不能为空",icon:"none"});else{this.isDisable=!0,uni.showLoading({title:"提交中"});for(var c={ProductName:i,ProductImg:[],ID:a},r=0;r<n.length;r++)c.ProductImg.push(n[r].src);uni.request({url:o.default.url+"Personal/SaveProductImg",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:s.default.stringify(c),method:"POST",success:function(e){uni.hideLoading(),console.log("产品",e),1==e.data.Success?(uni.showToast({title:"提交成功",duration:2e3,success:function(t){setTimeout(function(){uni.switchTab({url:"../person/person"})},2e3)}}),t.isDisable=!1):uni.showToast({title:e.data.Message})}}),console.log("data",c)}}}};e.default=r},dfad:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-page-body[data-v-87d2a108]{font-size:14px}.forms .person-item[data-v-87d2a108],.forms .person-pic[data-v-87d2a108]{padding:%?26?% %?40?%;border-bottom:1px solid #f0eff5}.forms .person-item[data-v-87d2a108]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.forms .person-item uni-label[data-v-87d2a108]{width:40%}.forms .person-item .uni-input-placeholder[data-v-87d2a108]{font-size:14px}.forms .person-pic[data-v-87d2a108]:last-child{border-bottom:0}.forms .person-pic .pic-list[data-v-87d2a108]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.forms .person-pic .pic-list .uploadPic[data-v-87d2a108]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border:1px solid #2f83ff;border-radius:%?10?%;background:rgba(4,167,234,.08);height:%?160?%;width:%?160?%;font-size:12px;color:#2f83ff;margin-top:%?30?%;margin-right:%?40?%}.forms .person-pic .pic-list .uploadPic .oldPic[data-v-87d2a108]{width:20px;height:20px;margin-bottom:%?16?%}.forms .person-pic .pic-list .uploadPic .newPic[data-v-87d2a108]{height:%?160?%;width:%?160?%}.forms .person-pic .pic-list .pic-item[data-v-87d2a108]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;z-index:1;margin-top:15px;margin-right:20px}.forms .person-pic .pic-list .pic-item .item-pic[data-v-87d2a108]{width:80px;height:80px}.forms .person-pic .pic-list .shanchu-btn[data-v-87d2a108]{position:absolute;top:-7px;right:-7px;z-index:2;width:15px;height:15px}.submin-btn[data-v-87d2a108]{background:#2f83ff;color:#fff;border-radius:%?10?%;width:90%;height:%?80?%;line-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?40?% auto}",""])}}]);