(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-product"],{"09e3":function(e,t,i){"use strict";i.r(t);var n=i("4576"),o=i("2dc5");for(var s in o)"default"!==s&&function(e){i.d(t,e,function(){return o[e]})}(s);i("23cc");var a=i("2877"),c=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"35d4158e",null);t["default"]=c.exports},"23cc":function(e,t,i){"use strict";var n=i("ebfc"),o=i.n(n);o.a},"2dc5":function(e,t,i){"use strict";i.r(t);var n=i("6bd2"),o=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=o.a},4576:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"forms"},[i("v-uni-view",{staticClass:"person-item"},[i("v-uni-label",[e._v("产品名称")]),i("v-uni-input",{attrs:{type:"text",placeholder:"填写产品名称"},model:{value:e.ProductName,callback:function(t){e.ProductName=t},expression:"ProductName"}})],1),i("v-uni-view",{staticClass:"person-pic"},[i("v-uni-view",{staticClass:"pic-title"},[e._v("购买产品")]),i("v-uni-view",{staticClass:"pic-list"},[e._l(e.ProductImg,function(t,n){return i("v-uni-view",{staticClass:"pic-item"},[i("v-uni-image",{staticClass:"item-pic",attrs:{src:t.src,mode:"aspectFill"}}),i("v-uni-image",{staticClass:"shanchu-btn",attrs:{src:"../../static/del.png",mode:"aspectFill"},on:{click:function(t){t=e.$handleEvent(t),e.shanchu(n)}}})],1)}),e.isShow?i("v-uni-view",{staticClass:"uploadPic",on:{click:function(t){t=e.$handleEvent(t),e.proPic(t)}}},[i("v-uni-image",{staticClass:"oldPic",attrs:{src:"../../static/photo.png",mode:"aspectFill"}}),i("v-uni-text",[e._v("上传照片")])],1):e._e()],2)],1)],1),i("v-uni-view",{staticClass:"submin-btn",attrs:{disabled:e.isDisable},on:{click:function(t){t=e.$handleEvent(t),e.subInfo(t)}}},[e._v("确认")])],1)},o=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o})},"6bd2":function(e,t,i){"use strict";var n=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("3400")),s=n(i("b735")),a=i("e2e7"),c="",r={data:function(){return{ProductImg:[],ProductName:"",isDisable:!1,isShow:!0,userID:""}},onLoad:function(){this.userID=uni.getStorageSync("userId")},methods:{proPic:function(){var e=this,t=this,i=this.ProductImg;console.log("allLen",i.length),uni.chooseImage({count:9-i.length,sizeType:["compressed"],sourceType:["album"],success:function(n){console.log("res",n);var o=n.tempFilePaths,s=o.length+i.length;if(s>9)uni.showToast({title:"上传图片不能超过9张!",icon:"none"}),e.isShow=!0;else for(var r in o){var l=n.tempFiles[r].size;l>1024&&(c=l/1024*100/100),c>50?uni.getImageInfo({src:n.tempFilePaths[r],success:function(e){console.log("压缩前",e),console.log(e.width),console.log(e.height);var n=e.width,o=e.height,s=new Image;s.src=e.path;var c=document.createElement("canvas"),r=c.getContext("2d");c.width=n/8,c.height=o/8,console.log("后",c.width),console.log("后",c.height),r.drawImage(s,0,0,n/8,o/8),c.toBlob(function(e){var n=window.URL.createObjectURL(e);(0,a.pathToBase64)(n).then(function(e){i.push({src:e}),i.length>=9&&(t.isShow=!1),t.ProductImg=i}).catch(function(e){console.error(e)})})}}):(0,a.pathToBase64)(n.tempFilePaths[r]).then(function(e){i.push({src:e}),i.length>=9&&(t.isShow=!1),t.ProductImg=i,console.log(2)}).catch(function(e){console.error(e)})}}})},shanchu:function(e){var t=e,i=this.ProductImg;i.splice(t,1),i.length<9&&(this.isShow=!0),this.ProductImg=i},subInfo:function(){var e=this,t=this,i=t.ProductName,n=t.ProductImg,a=t.userID;if(""==i)uni.showToast({title:"产品名称不能为空",icon:"none"});else if(""==n)uni.showToast({title:"产品图片不能为空",icon:"none"});else{this.isDisable=!0,uni.showLoading({title:"提交中"});for(var c={ProductName:i,ProductImg:[],ID:a},r=0;r<n.length;r++)c.ProductImg.push(n[r].src);uni.request({url:o.default.url+"Personal/SaveProductImg",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:s.default.stringify(c),method:"POST",success:function(t){uni.hideLoading(),console.log("产品",t),1==t.data.Success?(uni.showToast({title:"提交成功",duration:2e3,success:function(e){uni.navigateTo({url:"../person/person"})}}),e.isDisable=!1):uni.showToast({title:t.data.Message})}}),console.log("data",c)}}}};t.default=r},af13:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"uni-page-body[data-v-35d4158e]{font-size:14px}.forms .person-item[data-v-35d4158e],.forms .person-pic[data-v-35d4158e]{padding:%?26?% %?40?%;border-bottom:1px solid #f0eff5}.forms .person-item[data-v-35d4158e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.forms .person-item uni-label[data-v-35d4158e]{width:40%}.forms .person-item .uni-input-placeholder[data-v-35d4158e]{font-size:14px}.forms .person-pic[data-v-35d4158e]:last-child{border-bottom:0}.forms .person-pic .pic-list[data-v-35d4158e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.forms .person-pic .pic-list .uploadPic[data-v-35d4158e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border:1px solid #2f83ff;border-radius:%?10?%;background:rgba(4,167,234,.08);height:%?160?%;width:%?160?%;font-size:12px;color:#2f83ff;margin-top:%?30?%;margin-right:%?40?%}.forms .person-pic .pic-list .uploadPic .oldPic[data-v-35d4158e]{width:20px;height:20px;margin-bottom:%?16?%}.forms .person-pic .pic-list .uploadPic .newPic[data-v-35d4158e]{height:%?160?%;width:%?160?%}.forms .person-pic .pic-list .pic-item[data-v-35d4158e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;z-index:1;margin-top:15px;margin-right:20px}.forms .person-pic .pic-list .pic-item .item-pic[data-v-35d4158e]{width:80px;height:80px}.forms .person-pic .pic-list .shanchu-btn[data-v-35d4158e]{position:absolute;top:-7px;right:-7px;z-index:2;width:15px;height:15px}.submin-btn[data-v-35d4158e]{background:#2f83ff;color:#fff;border-radius:%?10?%;width:90%;height:%?80?%;line-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:%?40?% auto}",""])},ebfc:function(e,t,i){var n=i("af13");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("3f1d1505",n,!0,{sourceMap:!1,shadowMode:!1})}}]);